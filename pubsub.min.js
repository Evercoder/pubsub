!function(){var a=this,b=a.pubsub=function(a){this.options=a,this._pubsubEvents={},this._pubsubHappened={}};b.version="0.1.0";var c={pub:function(a){var b,c,d,e,f,g,h,i,j,k=this.eventNamespace(a);for(c=0,d=k.length;d>c;c++){for(b=this._pubsubEvents[j=k[c]]||[],g=Array.prototype.slice.call(arguments,1),e=0,f=b.length;f>e;e++)h=b[e],i=h[0].apply(h[1]||this,g),h[2]&&i!==!1&&this.unsub(j,h[0]);this._pubsubHappened[j]=g}return this},sub:function(a,b,c,d){var e,f,g,h,i,j=a.split(/\s+/);for(d=d||{once:!1,recoup:!1},g=0,h=j.length;h>g;g++)f=this._pubsubEvents[e=j[g]],f?f.push([b,c,d.once]):this._pubsubEvents[e]=[[b,c,d.once]],d.recoup&&(i=this._pubsubHappened[e],i&&b.apply(c||this,i));return this},unsub:function(a,b){var c,d,e,f,g,h=a.split(/\s+/);for(f=0;f<h.length;f++){for(d=this._pubsubEvents[c=h[f]]||[],e=[],g=0;b&&g<d.length;g++)d[g][0]!==b&&e.push(d[g]);this._pubsubEvents[c]=e}return this},once:function(a,b,c){return this.sub(a,b,c,{once:!0})},recoup:function(a,b,c){return this.sub(a,b,c,{recoup:!0})},eventSplitter:":",eventNamespace:function(a){var b,c,d=[],e="",f=this.eventSplitter;for(c=0;c<a.length;c++)(b=a.charAt(c))===f&&d.push(e),e+=b;return d.push(e),d}};for(var d in c)c.hasOwnProperty(d)&&(b.prototype[d]=c[d])}(this);